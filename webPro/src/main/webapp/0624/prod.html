<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/outStyle.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="../js/jquery-3.6.0.min.js"></script>
</head>
<body>
	<div class="col-md-3">
		<select class="form-control" id="lprod">
		</select>
	</div>

	<div class="col-md-3">
		<select class="form-control" id="prod">
			<option>prod리스트</option>
			<option>prod리스트</option>
			<option>prod리스트</option>
			<option>prod리스트</option>
		</select>
	</div>

	<br><br>
	
	<div>prod의 상세정보</div>
<script>
$.ajax({
	url : 'lprod.jsp',
	type : 'get',
	success : function(data){
		//select id영역에 뿌려주기
		let result = "";
		$.each(data, function(i){
			result += `<option value='${data[i].lprod_gu}'>${data[i].lprod_nm}</option>`;
		});
		$('#lprod').append(result);
	},
	error : function(xhr){
		alert(xhr.status);
	},
	dataType : 'json'
});

//자바스크립트로 ajax - lprod

//제이쿼리로 ajax - prod
$('#lprod').on('change',function(){
	$.ajax({
		url : 'prod.jsp',
		data : {'lprod_gu' : $(this).val},
		success : function(){
			//select id영역에 뿌려주기
			let result = "";
			$.each(data, function(i){
				result += `<option value='${data[i].prodId}'>${data[i].prodNm}</option>`;
			});
			$('#lprod').append(result);
		},
		error : function(xhr){
			alert(xhr.status)
		},
		dataType : 'json'
	})
})
</script>
</body>
</html>